this.travelPixel=function(r){var n={};function o(t){var e;return(n[t]||(e=n[t]={i:t,l:!1,exports:{}},r[t].call(e.exports,e,e.exports,o),e.l=!0,e)).exports}return o.m=r,o.c=n,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=2)}([function(t,e,r){!function(nt,ot){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */
t.exports=function(){"use strict";function n(t){var e=typeof t;return t!==null&&(e==="object"||e==="function")}function u(t){return typeof t==="function"}var t=void 0;if(Array.isArray)t=Array.isArray;else t=function(t){return Object.prototype.toString.call(t)==="[object Array]"};var r=t,o=0,e=void 0,i=void 0,s=function t(e,r){v[o]=e;v[o+1]=r;o+=2;if(o===2)if(i)i(b);else m()};function a(t){i=t}function c(t){s=t}var f=typeof window!=="undefined"?window:undefined,l=f||{},h=l.MutationObserver||l.WebKitMutationObserver,d=typeof self==="undefined"&&typeof nt!=="undefined"&&{}.toString.call(nt)==="[object process]",p=typeof Uint8ClampedArray!=="undefined"&&typeof importScripts!=="undefined"&&typeof MessageChannel!=="undefined";function M(){return function(){return nt.nextTick(b)}}function D(){if(typeof e!=="undefined")return function(){e(b)};return y()}function R(){var t=0;var e=new h(b);var r=document.createTextNode("");e.observe(r,{characterData:true});return function(){r.data=t=++t%2}}function L(){var t=new MessageChannel;t.port1.onmessage=b;return function(){return t.port2.postMessage(0)}}function y(){var t=setTimeout;return function(){return t(b,1)}}var v=new Array(1e3);function b(){for(var t=0;t<o;t+=2){var e=v[t];var r=v[t+1];e(r);v[t]=undefined;v[t+1]=undefined}o=0}function X(){try{var t=Function("return this")().require("vertx");e=t.runOnLoop||t.runOnContext;return D()}catch(t){return y()}}var m=void 0;if(d)m=M();else if(h)m=R();else if(p)m=L();else if(f===undefined&&"function"==="function")m=X();else m=y();function w(t,e){var r=this;var n=new this.constructor(x);if(n[_]===undefined)I(n);var o=r._state;if(o){var i=arguments[o-1];s(function(){return B(o,n,i,r._result)})}else k(r,n,t,e);return n}function g(t){var e=this;if(t&&typeof t==="object"&&t.constructor===e)return t;var r=new e(x);O(r,t);return r}var _=Math.random().toString(36).substring(2);function x(){}var A=void 0,T=1,E=2;function N(){return new TypeError("You cannot resolve a promise with itself")}function q(){return new TypeError("A promises callback cannot return that same promise.")}function H(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}function V(t,n,o){s(function(e){var r=false;var t=H(o,n,function(t){if(r)return;r=true;if(n!==t)O(e,t);else S(e,t)},function(t){if(r)return;r=true;j(e,t)},"Settle: "+(e._label||" unknown promise"));if(!r&&t){r=true;j(e,t)}},t)}function K(e,t){if(t._state===T)S(e,t._result);else if(t._state===E)j(e,t._result);else k(t,undefined,function(t){return O(e,t)},function(t){return j(e,t)})}function P(t,e,r){if(e.constructor===t.constructor&&r===w&&e.constructor.resolve===g)K(t,e);else if(r===undefined)S(t,e);else if(u(r))V(t,e,r);else S(t,e)}function O(e,t){if(e===t)j(e,N());else if(n(t)){var r=void 0;try{r=t.then}catch(t){j(e,t);return}P(e,t,r)}else S(e,t)}function G(t){if(t._onerror)t._onerror(t._result);U(t)}function S(t,e){if(t._state!==A)return;t._result=e;t._state=T;if(t._subscribers.length!==0)s(U,t)}function j(t,e){if(t._state!==A)return;t._state=E;t._result=e;s(G,t)}function k(t,e,r,n){var o=t._subscribers;var i=o.length;t._onerror=null;o[i]=e;o[i+T]=r;o[i+E]=n;if(i===0&&t._state)s(U,t)}function U(t){var e=t._subscribers;var r=t._state;if(e.length===0)return;var n=void 0,o=void 0,i=t._result;for(var s=0;s<e.length;s+=3){n=e[s];o=e[s+r];if(n)B(r,n,o,i);else o(i)}t._subscribers.length=0}function B(t,e,r,n){var o=u(r),i=void 0,s=void 0,a=true;if(o){try{i=r(n)}catch(t){a=false;s=t}if(e===i){j(e,q());return}}else i=n;if(e._state!==A);else if(o&&a)O(e,i);else if(a===false)j(e,s);else if(t===T)S(e,i);else if(t===E)j(e,i)}function J(r,t){try{t(function t(e){O(r,e)},function t(e){j(r,e)})}catch(t){j(r,t)}}var C=0;function Q(){return C++}function I(t){t[_]=C++;t._state=undefined;t._result=undefined;t._subscribers=[]}function Y(){return new Error("Array Methods must be provided an Array")}var $=function(){function t(t,e){this._instanceConstructor=t;this.promise=new t(x);if(!this.promise[_])I(this.promise);if(r(e)){this.length=e.length;this._remaining=e.length;this._result=new Array(this.length);if(this.length===0)S(this.promise,this._result);else{this.length=this.length||0;this._enumerate(e);if(this._remaining===0)S(this.promise,this._result)}}else j(this.promise,Y())}t.prototype._enumerate=function t(e){for(var r=0;this._state===A&&r<e.length;r++)this._eachEntry(e[r],r)};t.prototype._eachEntry=function t(e,r){var n=this._instanceConstructor;var o=n.resolve;if(o===g){var i=void 0;var s=void 0;var a=false;try{i=e.then}catch(t){a=true;s=t}if(i===w&&e._state!==A)this._settledAt(e._state,r,e._result);else if(typeof i!=="function"){this._remaining--;this._result[r]=e}else if(n===F){var u=new n(x);if(a)j(u,s);else P(u,e,i);this._willSettleAt(u,r)}else this._willSettleAt(new n(function(t){return t(e)}),r)}else this._willSettleAt(o(e),r)};t.prototype._settledAt=function t(e,r,n){var o=this.promise;if(o._state===A){this._remaining--;if(e===E)j(o,n);else this._result[r]=n}if(this._remaining===0)S(o,this._result)};t.prototype._willSettleAt=function t(e,r){var n=this;k(e,undefined,function(t){return n._settledAt(T,r,t)},function(t){return n._settledAt(E,r,t)})};return t}();function W(t){return new $(this,t).promise}function z(o){var i=this;if(!r(o))return new i(function(t,e){return e(new TypeError("You must pass an array to race."))});else return new i(function(t,e){var r=o.length;for(var n=0;n<r;n++)i.resolve(o[n]).then(t,e)})}function Z(t){var e=this;var r=new e(x);j(r,t);return r}function tt(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function et(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var F=function(){function e(t){this[_]=Q();this._result=this._state=undefined;this._subscribers=[];if(x!==t){typeof t!=="function"&&tt();this instanceof e?J(this,t):et()}}e.prototype.catch=function t(e){return this.then(null,e)};e.prototype.finally=function t(e){var r=this;var n=r.constructor;if(u(e))return r.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})});return r.then(e,e)};return e}();function rt(){var t=void 0;if(typeof ot!=="undefined")t=ot;else if(typeof self!=="undefined")t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var r=null;try{r=Object.prototype.toString.call(e.resolve())}catch(t){}if(r==="[object Promise]"&&!e.cast)return}t.Promise=F}return F.prototype.then=w,F.all=W,F.race=z,F.resolve=g,F.reject=Z,F._setScheduler=a,F._setAsap=c,F._asap=s,F.polyfill=rt,F.Promise=F}()}.call(this,r(3),r(4))},function(t,g,_){"use strict";_.r(g),function(n){_.d(g,"Headers",function(){return u}),_.d(g,"Request",function(){return p}),_.d(g,"Response",function(){return v}),_.d(g,"DOMException",function(){return m}),_.d(g,"fetch",function(){return w});var e,r,a={searchParams:"URLSearchParams"in self,iterable:"Symbol"in self&&"iterator"in Symbol,blob:"FileReader"in self&&"Blob"in self&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in self,arrayBuffer:"ArrayBuffer"in self};function o(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function i(t){return t="string"!=typeof t?String(t):t}function t(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return a.iterable&&(t[Symbol.iterator]=function(){return t}),t}function u(e){this.map={},e instanceof u?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function s(t){if(t.bodyUsed)return n.reject(new TypeError("Already read"));t.bodyUsed=!0}function c(r){return new n(function(t,e){r.onload=function(){t(r.result)},r.onerror=function(){e(r.error)}})}function f(t){var e=new FileReader,r=c(e);return e.readAsArrayBuffer(t),r}function l(t){var e;return t.slice?t.slice(0):((e=new Uint8Array(t.byteLength)).set(new Uint8Array(t)),e.buffer)}function h(){return this.bodyUsed=!1,this._initBody=function(t){var e;(this._bodyInit=t)?"string"==typeof t?this._bodyText=t:a.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:a.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:a.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():a.arrayBuffer&&a.blob&&((e=t)&&DataView.prototype.isPrototypeOf(e))?(this._bodyArrayBuffer=l(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||r(t))?this._bodyArrayBuffer=l(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):a.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},a.blob&&(this.blob=function(){var t=s(this);if(t)return t;if(this._bodyBlob)return n.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return n.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return n.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?s(this)||n.resolve(this._bodyArrayBuffer):this.blob().then(f)}),this.text=function(){var t,e,r=s(this);if(r)return r;if(this._bodyBlob)return r=this._bodyBlob,t=new FileReader,e=c(t),t.readAsText(r),e;if(this._bodyArrayBuffer)return n.resolve(function(t){for(var e=new Uint8Array(t),r=new Array(e.length),n=0;n<e.length;n++)r[n]=String.fromCharCode(e[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return n.resolve(this._bodyText)},a.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}a.arrayBuffer&&(e=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=ArrayBuffer.isView||function(t){return t&&-1<e.indexOf(Object.prototype.toString.call(t))}),u.prototype.append=function(t,e){t=o(t),e=i(e);var r=this.map[t];this.map[t]=r?r+", "+e:e},u.prototype.delete=function(t){delete this.map[o(t)]},u.prototype.get=function(t){return t=o(t),this.has(t)?this.map[t]:null},u.prototype.has=function(t){return this.map.hasOwnProperty(o(t))},u.prototype.set=function(t,e){this.map[o(t)]=i(e)},u.prototype.forEach=function(t,e){for(var r in this.map)this.map.hasOwnProperty(r)&&t.call(e,this.map[r],r,this)},u.prototype.keys=function(){var r=[];return this.forEach(function(t,e){r.push(e)}),t(r)},u.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),t(e)},u.prototype.entries=function(){var r=[];return this.forEach(function(t,e){r.push([e,t])}),t(r)},a.iterable&&(u.prototype[Symbol.iterator]=u.prototype.entries);var d=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function p(t,e){var r,n=(e=e||{}).body;if(t instanceof p){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new u(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new u(e.headers)),this.method=(t=e.method||this.method||"GET",r=t.toUpperCase(),-1<d.indexOf(r)?r:t),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function y(t){var r=new FormData;return t.trim().split("&").forEach(function(t){var e;t&&(e=(t=t.split("=")).shift().replace(/\+/g," "),t=t.join("=").replace(/\+/g," "),r.append(decodeURIComponent(e),decodeURIComponent(t)))}),r}function v(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new u(e.headers),this.url=e.url||"",this._initBody(t)}p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},h.call(p.prototype),h.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new u(this.headers),url:this.url})},v.error=function(){var t=new v(null,{status:0,statusText:""});return t.type="error",t};var b=[301,302,303,307,308],m=(v.redirect=function(t,e){if(-1===b.indexOf(e))throw new RangeError("Invalid status code");return new v(null,{status:e,headers:{location:t}})},self.DOMException);try{new m}catch(t){(m=function(t,e){this.message=t,this.name=e;e=Error(t);this.stack=e.stack}).prototype=Object.create(Error.prototype),m.prototype.constructor=m}function w(i,s){return new n(function(n,t){var e=new p(i,s);if(e.signal&&e.signal.aborted)return t(new m("Aborted","AbortError"));var o=new XMLHttpRequest;function r(){o.abort()}o.onload=function(){var r,t={status:o.status,statusText:o.statusText,headers:(t=o.getAllResponseHeaders()||"",r=new u,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var t=t.split(":"),e=t.shift().trim();e&&(t=t.join(":").trim(),r.append(e,t))}),r)},e=(t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL"),"response"in o?o.response:o.responseText);n(new v(e,t))},o.onerror=function(){t(new TypeError("Network request failed"))},o.ontimeout=function(){t(new TypeError("Network request failed"))},o.onabort=function(){t(new m("Aborted","AbortError"))},o.open(e.method,e.url,!0),"include"===e.credentials?o.withCredentials=!0:"omit"===e.credentials&&(o.withCredentials=!1),"responseType"in o&&a.blob&&(o.responseType="blob"),e.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),e.signal&&(e.signal.addEventListener("abort",r),o.onreadystatechange=function(){4===o.readyState&&e.signal.removeEventListener("abort",r)}),o.send(void 0===e._bodyInit?null:e._bodyInit)})}w.polyfill=!0,self.fetch||(self.fetch=w,self.Headers=u,self.Request=p,self.Response=v)}.call(this,_(0))},function(t,e,r){"use strict";var n=r(0),u=(n=n)&&n.__esModule?n:{default:n};function o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}r(1);var n=r(5),c=n.COOKIE_NAME,i=n.PPID_COOKIE_NAME,f=n.Util,s=r(7);var a=function(){function n(t,e,r){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");if(this.domainName=t,!this.domainName)throw new Error("Illegal arguments exception");this.domainMap=new s(t,e,r)}var t,e,r;return t=n,(e=[{key:"_findXdid",value:function(e){var i=this,s=this.domainMap.thirdPartyPixelUrl(),n=this.domainMap.xShopUrls()||[],a=!1;return function e(t,r){return t.then(function(t){return a=a||t&&t.optout,t&&t.hasXdid()?u.default.resolve(t):r>=n.length?u.default.resolve(null):e(f.queryXdid(n[r]),r+1)})}(f.queryXdid(s),0).then(function(t){var r,n,o,t=null===t?null:t.xdidString();return a?u.default.resolve(t):(r=s,n=t,o=e,i.domainName,f.setLocalXdid(n,o).then(function(t){var e;return null===t?(console.error("Did not successfully set first-party xdid"),t):(e=f.setThirdPartyXdid(r,t.xdidString(),o),t&&t.xdidString()===n?t.xdidString():e.then(function(t){return t?t.xdidString():null}))}).then(function(t){return localStorage.setItem(c,t),t}))})}},{key:"loadXdidApi",value:function(t){var e=this,r=f.getCookieValue(c),n=f.getCookieValue(i);return!f.cookieExists(r)||f.canTrack()&&!f.validPpidCookie(n)?this.domainMap.load().then(function(){return e._findXdid(t)}):f.setThirdPartyXdid(this.domainMap.thirdPartyPixelUrl(),r,t).then(function(t){return t&&t.hasXdid()?t.xdidString():null}).then(function(t){return localStorage.setItem(c,t),t})}}])&&o(t.prototype,e),r&&o(t,r),Object.defineProperty(t,"prototype",{writable:!1}),n}();function l(t){"function"==typeof t&&t(a)}window&&(n=window.travelPixel)&&0<n.length&&n.forEach&&n.forEach(function(t){l(t)}),t.exports={push:l,Waiter:a}},function(t,e){var r,n,t=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(t){n=i}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return(r=setTimeout)(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}var a,u=[],c=!1,f=-1;function l(){c&&a&&(c=!1,a.length?u=a.concat(u):f=-1,u.length&&h())}function h(){if(!c){for(var t=s(l),e=(c=!0,u.length);e;){for(a=u,u=[];++f<e;)a&&a[f].run();f=-1,e=u.length}a=null,c=!1,!function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return(n=clearTimeout)(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function p(){}t.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new d(t,e)),1!==u.length||c||s(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={},t.on=p,t.addListener=p,t.once=p,t.off=p,t.removeListener=p,t.removeAllListeners=p,t.emit=p,t.prependListener=p,t.prependOnceListener=p,t.listeners=function(t){return[]},t.binding=function(t){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(t){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},function(t,e){var r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(r=window)}t.exports=r},function(t,e,r){"use strict";function n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}r(1);var o=r(6);function s(t,e){if(e.ok)return e.json();throw new Error("Fetch failed for ".concat(t," with status ").concat(e.status))}r=function(){function i(){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function")}var t,e,r;return t=i,r=[{key:"getPix",value:function(t){try{if(t)return new o(t)}catch(t){console.error(t)}return null}},{key:"queryXdid",value:function(e){var t="".concat(e,"/get");return window.fetch(t,{credentials:"include"}).then(function(t){return s(e,t)}).then(function(t){return i.getPix(t)}).catch(function(t){return console.error(t),null})}},{key:"setLocalXdid",value:function(t,e){return i.setXdid("/trvl-px/v2/pix",t,e)}},{key:"setThirdPartyXdid",value:function(t,e,r){return i.setXdid("".concat(t,"/pix"),e,r)}},{key:"setXdidSimpleRequest",value:function(t,e,r){var n=null,o=(e&&(n=JSON.stringify({xdid:e})),"".concat(t,"?").concat(this.objectToQueryString(r)));return window.fetch(o,{method:"POST",credentials:"include",body:n}).then(function(t){return s(o,t)}).then(function(t){return i.getPix(t)}).catch(function(t){return console.error(t),null})}},{key:"setXdid",value:function(t,e,r){var n=null,o=(e&&(n=JSON.stringify({xdid:e})),"".concat(t,"?").concat(this.objectToQueryString(r)));return window.fetch(o,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:n}).then(function(t){return s(o,t)}).then(function(t){return i.getPix(t)}).catch(function(t){return console.error(t),null})}},{key:"objectToQueryString",value:function(t){var e,r,n=[];if(!t||"function"!=typeof t.hasOwnProperty)return"";for(e in t)t.hasOwnProperty(e)&&(r=(r=t[e])||"",n.push("".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(r))));return n.join("&")}},{key:"getCookieValue",value:function(t,e){if("string"!=typeof e){if(!document||!document.cookie)return null;e=document.cookie}e=e.match("(^|[^;]+)\\s*".concat(t,"\\s*=\\s*([^;]+)"));return e?e.pop():""}},{key:"cookieExists",value:function(t){return"string"==typeof t&&0<t.trim().length}},{key:"validPpidCookie",value:function(t){return!!this.cookieExists(t)&&null!==t.match(/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/)}},{key:"canTrack",value:function(){var t=this.getCookieValue("OIP");return!this.cookieExists(t)||0<=t.indexOf("gdpr|1")}}],(e=null)&&n(t.prototype,e),r&&n(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}();t.exports={Util:r,COOKIE_NAME:"xdid",PPID_COOKIE_NAME:"eg_ppid"}},function(t,e,r){"use strict";function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i=[],s=!0,a=!1;try{for(r=r.call(t);!(s=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);s=!0);}catch(t){a=!0,o=t}finally{try{s||null==r.return||r.return()}finally{if(a)throw o}}return i}}(t,e)||function(t,e){var r;if(t)return"string"==typeof t?n(t,e):"Map"===(r="Object"===(r=Object.prototype.toString.call(t).slice(8,-1))&&t.constructor?t.constructor.name:r)||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var s=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");this.raw=t,this.optout=t.o,!this.optout&&t.v?(t=o(t.v.split("|"),3),this.id=t[0],this.timestamp=t[1],this.domain=t[2]):(this.id=null,this.timestamp=null,this.domain=null)}var t,r,n;return t=e,(r=[{key:"xdidString",value:function(){return null!=this.timestamp&&null!=this.domain?"".concat(this.id,"|").concat(this.timestamp,"|").concat(this.domain):"".concat(this.id)}},{key:"hasXdid",value:function(){return null!=this.id}}])&&i(t.prototype,r),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();t.exports=s},function(t,e,r){"use strict";var n=r(0),o=(n=n)&&n.__esModule?n:{default:n};function i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}r(1);var s=r(8),a={prod:"https://www.trvl-px.com/trvl-px/v2"},u=a.prod,n=function(){function n(t,e,r){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");this.hostname=t,this.env=e,this.cdnUrl=r||"https://b.travel-assets.com/travel-pixel-js/1.0.0",this._loaded=!1,this.config=null,this.fetchOpts={},this.thirdPartyPixelUrlValue=a[this.env]||u}var t,e,r;return t=n,(e=[{key:"load",value:function(){var t,e=this,r=this;return this._loaded&&this.config?o.default.resolve(this.config):(t=s.buildConfigFilename(this.hostname,this.env))?(t="".concat(this.cdnUrl,"/").concat("config","/").concat(t),window.fetch(t,this.fetchOpts).then(function(t){return t.ok?t.json():{env:e.env,name:"expediaDC",domain:e.hostname,xshopUrls:[]}}).then(function(t){return r._loaded=!0,r.config=t}).catch(function(t){return console.error(t),t})):o.default.reject("Failed to build config asset name")}},{key:"xShopUrls",value:function(){if(this._loaded)return this.config&&this.config.xshopUrls||[];throw new TypeError("Must call load() prior to calling next()")}},{key:"thirdPartyPixelUrl",value:function(){return this.thirdPartyPixelUrlValue}}])&&i(t.prototype,e),r&&i(t,r),Object.defineProperty(t,"prototype",{writable:!1}),n}();t.exports=n},function(t,e,r){"use strict";t.exports={buildConfigFilename:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"prod";return t=t||window.location.hostname,"".concat(t,"-").concat(e,"-config.json")}}}]);
//# sourceMappingURL=app.js.map